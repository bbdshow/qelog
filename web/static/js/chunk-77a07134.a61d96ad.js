(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77a07134"],{"302c":function(t,e,n){"use strict";n("e231")},6343:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:0,staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"DBIndex",width:"135px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.dbIndex))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"时间",width:"135px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(t._f("parseTime")(r.createdTsSec,"{y}-{m}-{d} {h}:{i}")))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"HOST",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.host))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"DB",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.dbName))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"数据总大小",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(t.calcSize(r.dataSize).number.toFixed(3)))]),t._v(" "),n("span",[t._v(t._s(t.calcSize(r.dataSize).unit))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"存储总大小",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(t.calcSize(r.storageSize).number.toFixed(3)))]),t._v(" "),n("span",[t._v(t._s(t.calcSize(r.storageSize).unit))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"索引总大小",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(t.calcSize(r.indexSize).number.toFixed(3)))]),t._v(" "),n("span",[t._v(t._s(t.calcSize(r.indexSize).unit))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"文档总条数",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(t.calcNum(r.objects).number.toFixed(3)))]),t._v(" "),n("span",[t._v(t._s(t.calcNum(r.objects).unit))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"集合总数",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.collections))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"索引总数",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.indexs))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handlerCollMetrics(r.host,r.dbName)}}},[t._v("\n          集合容量\n        ")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:"集合容量",visible:t.dialogFormVisible,width:"90%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:1,staticStyle:{width:"100%"},attrs:{data:t.collList,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"时间",width:"135px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(t._f("parseTime")(r.createdTsSec,"{y}-{m}-{d} {h}:{i}")))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"集合",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"数据总大小",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(t.calcSize(r.size).number.toFixed(3)))]),t._v(" "),n("span",[t._v(t._s(t.calcSize(r.size).unit))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"存储总大小",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(t.calcSize(r.storageSize).number.toFixed(3)))]),t._v(" "),n("span",[t._v(t._s(t.calcSize(r.storageSize).unit))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"平均对象大小",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(t.calcSize(r.avgObjSize).number.toFixed(3)))]),t._v(" "),n("span",[t._v(t._s(t.calcSize(r.avgObjSize).unit))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"索引总大小",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(t.calcSize(r.totalIndexSize).number.toFixed(3)))]),t._v(" "),n("span",[t._v(t._s(t.calcSize(r.totalIndexSize).unit))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"索引大小分布",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return t._l(r.indexSizes,(function(e,r){return n("div",{key:r},[n("span",[t._v("名称:"+t._s(r)+" =>")]),t._v(" "),n("span",[t._v("大小:"+t._s(t.calcSize(e).number.toFixed(3)))]),t._v(" "),n("span",[t._v(t._s(t.calcSize(e).unit))])])}))}}])}),t._v(" "),n("el-table-column",{attrs:{label:"文档总条数",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(t.calcNum(r.count).number.toFixed(3)))]),t._v(" "),n("span",[t._v(t._s(t.calcNum(r.count).unit))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("el-popconfirm",{attrs:{"confirm-button-text":"确认删除","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"您确定删除 "+r.name+" 集合吗？删除操作不可逆"},on:{onConfirm:function(e){return t.deleteColl(r.host,r.name)}}},[n("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v("删除集合")])],1)]}}])})],1)],1)],1)},a=[],l=n("a372"),u=n("d3b6"),i={name:"DBStats",data:function(){return{list:null,listLoading:!1,collList:null,collQuery:{host:"",dbName:""},dialogFormVisible:!1}},created:function(){this.getMetricsDBStat()},methods:{getMetricsDBStat:function(){var t=this;this.listLoading=!0,Object(l["n"])().then((function(e){t.list=e.data.list,t.listLoading=!1}))},handlerCollMetrics:function(t,e){var n=this;this.collQuery.host=t,this.collQuery.dbName=e,this.listLoading=!0,Object(l["m"])(this.collQuery).then((function(t){n.collList=t.data.list,n.dialogFormVisible=!0,console.log(n.collList)})),setInterval((function(){n.listLoading=!1}),500)},deleteColl:function(t,e){var n=this;Object(l["f"])({host:t,name:e}).then((function(t){n.$notify({title:"Success",message:"删除成功",type:"success",duration:2e3}),n.dialogFormVisible=!1}))},calcSize:function(t){return Object(u["b"])(t)},calcNum:function(t){return Object(u["a"])(t)}}},o=i,c=(n("302c"),n("2877")),s=Object(c["a"])(o,r,a,!1,null,"3b3650ec",null);e["default"]=s.exports},a372:function(t,e,n){"use strict";n.d(e,"i",(function(){return a})),n.d(e,"q",(function(){return l})),n.d(e,"c",(function(){return u})),n.d(e,"u",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"h",(function(){return c})),n.d(e,"a",(function(){return s})),n.d(e,"s",(function(){return d})),n.d(e,"d",(function(){return f})),n.d(e,"j",(function(){return m})),n.d(e,"b",(function(){return b})),n.d(e,"t",(function(){return _})),n.d(e,"e",(function(){return v})),n.d(e,"r",(function(){return p})),n.d(e,"l",(function(){return h})),n.d(e,"k",(function(){return g})),n.d(e,"f",(function(){return S})),n.d(e,"n",(function(){return w})),n.d(e,"m",(function(){return x})),n.d(e,"o",(function(){return y})),n.d(e,"p",(function(){return k}));var r=n("b775");function a(t){return Object(r["a"])({url:"/dbIndex",method:"get"})}function l(t){return Object(r["a"])({url:"/module/list",method:"get",params:t})}function u(t){return Object(r["a"])({url:"/module",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/module",method:"put",data:t})}function o(t){return Object(r["a"])({url:"/module",method:"delete",data:t})}function c(t){return Object(r["a"])({url:"/alarmRule/list",method:"get",params:t})}function s(t){return Object(r["a"])({url:"/alarmRule",method:"post",data:t})}function d(t){return Object(r["a"])({url:"/alarmRule",method:"put",data:t})}function f(t){return Object(r["a"])({url:"/alarmRule",method:"delete",data:t})}function m(t){return Object(r["a"])({url:"/alarmRule/hook/list",method:"get",params:t})}function b(t){return Object(r["a"])({url:"/alarmRule/hook",method:"post",data:t})}function _(t){return Object(r["a"])({url:"/alarmRule/hook",method:"put",data:t})}function v(t){return Object(r["a"])({url:"/alarmRule/hook",method:"delete",data:t})}function p(t){return Object(r["a"])({url:"/alarmRule/hook/ping",method:"get",params:t})}function h(t){return Object(r["a"])({url:"/logging/list",method:"post",data:t})}function g(t){return Object(r["a"])({url:"/logging/traceid",method:"post",data:t})}function S(t){return Object(r["a"])({url:"/logging/collection",method:"delete",data:t})}function w(){return Object(r["a"])({url:"/metrics/dbStats",method:"get"})}function x(t){return Object(r["a"])({url:"/metrics/collStats",method:"get",params:t})}function y(t){return Object(r["a"])({url:"/metrics/module/list",method:"get",params:t})}function k(t){return Object(r["a"])({url:"/metrics/module/trend",method:"get",params:t})}},d3b6:function(t,e,n){"use strict";function r(t){for(var e=0;t>1024;)if(e++,t/=1024,e>=2)break;switch(e){case 0:return{number:t,unit:"B"};case 1:return{number:t,unit:"KB"};case 2:return{number:t,unit:"MB"}}}function a(t){for(var e=t,n=0;t>1e4;)if(n++,t/=10,n>=4)break;if(n<=2)return{number:e,unit:""};switch(n){case 3:return{number:t,unit:"K"};case 4:return{number:t,unit:"10K"};default:return{number:t,unit:""}}}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}))},e231:function(t,e,n){}}]);